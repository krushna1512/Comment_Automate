
name: Create Release Build

on:
  release:
    types: [released, prereleased]

jobs:

  check-release:
    name: 1st file
    uses: krushna1512/reusable_workflow/.github/workflows/check-release.yml@main
    with:
     release: ${{ inputs.release }}
    secrets: inherit
    

  check-history:
    name: Check if release is behind
    needs: check-release
    uses: krushna1512/reusable_workflow/.github/workflows/check-history.yml@main
    secrets: inherit

  check-build:
    name: Check if build is behind
    needs: [check-release, check-history]
    runs-on: ubuntu-latest
    steps:
        - name: Debug Outputs
          run: |
            echo "Prefix: ${{ needs.check-release.outputs.prefix }}"
            echo "Clean: ${{ needs.check-history.outputs.clean }}"
        - name: Continue with build if condition is met
          run: echo "Build is not behind"
          if: ${{ needs.check-release.outputs.prefix == 'release' || needs.check-release.outputs.prefix == 'prerelease' }}


  check-build1:
      name: Check if build1 is behind
      needs: [ check-release, check-history ]
      if:  ${{ needs.check-release.outputs.prefix == 'release' || needs.check-release.outputs.prefix == 'prerelease' }}
      uses: krushna1512/reusable_workflow/.github/workflows/check-history.yml@main
      secrets: inherit

 
        
